/* Fonts: Inter for body, Cinzel for display headings */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Cinzel:wght@600;700&display=swap');
@import "tailwindcss";

/* ---- Global look & feel (calm, modern, gothic-inspired) ---- */
/* We keep the blackletter font only for logos/headings. Body uses system UI for readability. */
:root{
  /* Base surfaces */
  --bg-0:#0b0b0f;            /* near-black */
  --bg-1:#0f0f14;            /* panel surface */
  --glass:rgba(255,255,255,.05); /* glass layer */
  --border:rgba(255,255,255,.10);/* subtle border */

  /* Brand (default: indigo) */
  --brand:#4338ca;           /* indigo-700 */
  --brand-contrast:#e0e7ff;  /* indigo-100 for text */
  --accent:#06b6d4;          /* cyan-500 subtle accent */

  /* Focus ring + states */
  --ring-color: color-mix(in oklch, var(--brand), #ffffff 20%);
  --ring: 0 0 0 3px color-mix(in oklch, var(--ring-color), transparent 70%);
}

/* Optional variant: crimson theme */
/* Apply by adding data-theme="crimson" to <body> or <html> */
[data-theme="crimson"]{
  --brand:#b91c1c;           /* red-700 */
  --brand-contrast:#fee2e2;  /* red-100 */
  --accent:#fb7185;          /* rose-400 */
}

html,body{
  height:100%;
}

body{
  /* Subtle layered background: radial glow + vignette */
  background:
    radial-gradient(1200px 600px at 20% 0%, #111 0%, transparent 60%),
    radial-gradient(900px 500px at 80% 100%, #15151b 0%, transparent 55%),
    linear-gradient(180deg, var(--bg-0), #09090b 70%);
  color: #e5e7eb; /* slate-200 */
  font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Utility for headings in gothic font */
.gothic {
  font-family: 'Cinzel', serif;
  letter-spacing: .02em;
}

/* ---- Glass panel primitives ---- */
.glass {
  /* Slightly frosted panel with gentle tint */
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
  backdrop-filter: blur(12px) saturate(120%);
  -webkit-backdrop-filter: blur(12px) saturate(120%);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: 1rem; /* rounded-2xl */
  background-clip: padding-box; /* keep border crisp */
  isolation: isolate; /* ensure proper backdrop composition */
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

/* Focus ring polish for inputs/buttons on dark glass */
.focus-ring:focus {
  outline: none;
  box-shadow: var(--ring);
}

/* ---- Removed old flashy effects ---- */
/* (Requested) Remove lightning overlay, flicker, and animated gradient. */
/* If any old classes remain in components, they will now do nothing. */

/* ---- Design primitives: buttons, inputs, links, badges ---- */
.btn {
  @apply inline-flex items-center justify-center px-4 py-2 rounded-md transition select-none;
}
.btn-primary {
  color: var(--brand-contrast);
  background: color-mix(in oklch, var(--brand), black 10%);
  border: 1px solid color-mix(in oklch, var(--brand), white 20%);
}
.btn-primary:hover { background: color-mix(in oklch, var(--brand), black 20%); }
.btn-ghost {
  background: var(--glass);
  border: 1px solid var(--border);
  color: #e5e7eb;
}
.btn-ghost:hover { background: rgba(255,255,255,.08); }

.input {
  @apply w-full p-2 rounded-md text-black;
}

.link {
  color: var(--brand-contrast);
  text-decoration-color: color-mix(in oklch, var(--brand), white 30%);
  text-decoration-thickness: .08em;
  text-underline-offset: 3px;
}
.link:hover { color: white; }

.badge-glass {
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
  border: 1px solid var(--border);
  border-radius: 9999px;
  padding: 2px 8px;
  color: var(--brand-contrast);
  font-size: 12px;
  letter-spacing: .02em;
}

/* Book card subtle "spine" accent */
.book-card {
  position: relative;
  overflow: visible;
}
.book-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 6px;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.02));
  border-right: 1px solid rgba(255,255,255,.08);
  pointer-events: none;
  border-top-left-radius: inherit;
  border-bottom-left-radius: inherit;
}

/* Ensure inner flipping surfaces follow the parent corner radius */
.book-surface {
  border-radius: inherit;
  overflow: hidden;
}

/* Amazon CTA variant: keep glass background with brand accent */
.btn-amazon {
  color: #ff9900; /* Amazon orange */
  background: var(--glass);
  border: 1px solid color-mix(in oklch, #ff9900, white 30%);
}
.btn-amazon:hover { background: rgba(255,255,255,.08); }

/* ---- Animated Clouds Background ---- */
.clouds {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0; /* behind app content */
}

/* lightning overlay styles removed (component unmounted) */

.clouds-1,
.clouds-2,
.clouds-3 {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 500px;
  background-repeat: repeat-x;
  background-position: 0 0;
}

/* You can replace these URLs with /assets/clouds/*.png later */
.clouds-1 {
  background-image: url('https://s.cdpn.io/15514/clouds_1.png');
  animation: clouds-loop-1 var(--cloud1-duration) linear infinite;
}
.clouds-2 {
  background-image: url('https://s.cdpn.io/15514/clouds_2.png');
  animation: clouds-loop-2 var(--cloud2-duration) linear infinite;
}
.clouds-3 {
  background-image: url('https://s.cdpn.io/15514/clouds_3.png');
  animation: clouds-loop-3 var(--cloud3-duration) linear infinite;
}

@keyframes clouds-loop-1 { to { background-position: -1000px 0; } }
@keyframes clouds-loop-2 { to { background-position: -1000px 0; } }
@keyframes clouds-loop-3 { to { background-position: -1579px 0; } }

/* Respect motion preferences and manual toggle */
@media (prefers-reduced-motion: reduce) {
  .clouds { display: none; }
}

[data-motion="reduced"] .clouds {
  display: none;
}

/* Storm tint overlay (seafoam glow) */
:root {
  --storm-tint-alpha: 0.36;                 /* overall intensity (stronger) */
  /* Shift toward a greener seafoam, slightly de-emphasize blue */
  --storm-seafoam-1: 88 160 120;            /* #58A078 (greener, moody teal) */
  --storm-seafoam-2: 102 180 140;           /* #66B48C (lighter seafoam) */
  --storm-blue-1: 70 150 200;               /* softened blue */
  --storm-blue-2: 85 170 220;               /* accent blue */
}
.clouds::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  /* layered seafoam glows + stronger vertical wash */
  background:
    /* reduce blue a touch */
    radial-gradient(80% 55% at 30% 6%,  rgb(var(--storm-blue-1) / calc(var(--storm-tint-alpha) * .10)), transparent 68%),
    radial-gradient(80% 55% at 70% 8%,  rgb(var(--storm-blue-2) / calc(var(--storm-tint-alpha) * .08)), transparent 70%),
    /* increase green seafoam weight slightly */
    radial-gradient(160% 90% at 50% 0%, rgb(var(--storm-seafoam-1) / calc(var(--storm-tint-alpha) * 1.30)), transparent 78%),
    radial-gradient(100% 60% at 15% 18%, rgb(var(--storm-seafoam-2) / calc(var(--storm-tint-alpha) * 1.20)), transparent 70%),
    radial-gradient(100% 60% at 85% 14%, rgb(var(--storm-seafoam-1) / calc(var(--storm-tint-alpha) * 1.10)), transparent 70%),
    linear-gradient(180deg, rgb(var(--storm-seafoam-1) / calc(var(--storm-tint-alpha) * .68)), transparent);
  /* preserve cloud luminance; apply only color tint */
  background-blend-mode: normal;
  mix-blend-mode: color;
  filter: saturate(190%);
}

/* ---- Book 3D Flip (requested structure) ---- */
.book-card.no-spine::before { display: none; }
.perspective { position: relative; z-index: 1; width: 100%; height: 100%; perspective: 1000px; transform-style: preserve-3d; }
.book-wrap { position: relative; width: 100%; height: 100%; transform-style: preserve-3d; transition: transform .6s ease-out; border-radius: inherit; }
.book { position: absolute; inset: 0; background-size: cover; background-position: center; border-radius: inherit; backface-visibility: hidden; cursor: pointer; box-shadow: 0 12px 28px rgba(0,0,0,.35); }
.title { position: absolute; left: -4px; top: 0; bottom: 0; width: 28px; background: var(--brand); transform: rotateY(-80deg) translateX(-10px); border-top-left-radius: 10px; border-bottom-left-radius: 10px; opacity: 1; pointer-events: none; display: flex; align-items: center; justify-content: center; }
.title .spine-text { writing-mode: vertical-rl; transform: rotate(180deg); font-size: 11px; font-weight: 600; letter-spacing: .06em; color: var(--brand-contrast); text-shadow: 0 1px 2px rgba(0,0,0,.6); opacity: .95; }
.book-back { position: absolute; inset: 0; background: #0f0f14; color: #e5e7eb; border-radius: inherit; backface-visibility: hidden; transform: rotateY(180deg); display: flex; flex-direction: column; padding: 20px; box-shadow: 0 12px 28px rgba(0,0,0,.35); }
.book-back .text { transform: rotateX(0); text-align: left; overflow: auto; }
.book-wrap.rotate { transform: rotateY(12deg); }
.book-wrap.flip { transform: rotateY(180deg); }

/* Subtle under-book shadow (not affected by flip) */
.book-shadow { position: absolute; left: 10%; right: 10%; bottom: 10px; height: 14px; z-index: 0; background: radial-gradient(50% 60% at 50% 50%, rgba(0,0,0,.35), rgba(0,0,0,0)); filter: blur(2px); }

/* Featured book gentle tilt animation */
.feature-tilt { animation: book-feature-tilt 6s ease-in-out infinite; transform-origin: 20% 50%; }
@keyframes book-feature-tilt {
  0% { transform: rotateY(8deg); }
  50% { transform: rotateY(12deg); }
  100% { transform: rotateY(8deg); }
}
@media (prefers-reduced-motion: reduce) {
  .feature-tilt { animation: none; }
}
/* Adjustable speeds for clouds */
:root {
  --cloud1-duration: 45s; /* was 15s */
  --cloud2-duration: 60s; /* was 20s */
  --cloud3-duration: 54s; /* was 17s */
}
